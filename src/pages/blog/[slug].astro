---
import BaseLayout from '@/layouts/BaseLayout.astro';
import getPostData from '@/utils/getPostData';

export async function getStaticPaths() {
  const posts = await Astro.glob('../../data/posts/*.md');
  return posts.map((p: any) => ({
    params: { slug: p.file.split('/').pop().split('.').shift() },
    props: { post: p },
  }));
}

const { Content, frontmatter } = Astro.props.post;
const { title, description, publishDate } = frontmatter;
const { readingTime } = getPostData(Astro.props.post);

const formattedPublishDate = new Date(publishDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});
---

<BaseLayout pageTitle={title} description={description} hideTitle>
  <div class="flex flex-col gap-4">
    <div>
      <h1 class="text-bold text-2xl text-neutral-100">{title}</h1>
      <span class="text-sm">{formattedPublishDate} ~ {readingTime}</span>
    </div>

    <div>
      <Content />
    </div>
  </div>

</BaseLayout>
